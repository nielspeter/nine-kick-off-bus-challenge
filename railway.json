{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "Dockerfile"
  },
  "deploy": {
    "numReplicas": 1,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10,
    "healthcheckPath": "/api/health",
    "healthcheckTimeout": 30
  },
  "services": [
    {
      "name": "nine-kickoff-app",
      "source": {
        "repo": "nielspeter/nine-kick-off-bus-challenge"
      },
      "deploy": {
        "startCommand": "node .output/server/index.mjs",
        "healthcheckPath": "/api/health"
      },
      "envVars": {
        "NODE_ENV": "production",
        "NITRO_HOST": "0.0.0.0",
        "NITRO_PORT": {
          "$ref": "$PORT"
        },
        "DATABASE_URL": {
          "$ref": "$DATABASE_URL"
        },
        "REDIS_URL": {
          "$ref": "$REDIS_URL"
        },
        "AUTH_MODE": "google",
        "AUTH_URL": {
          "$ref": "$RAILWAY_PUBLIC_DOMAIN"
        },
        "AUTH_SECRET": {
          "$ref": "$AUTH_SECRET"
        },
        "AUTH_TRUST_HOST": "true",
        "GOOGLE_CLIENT_ID": {
          "$ref": "$GOOGLE_CLIENT_ID"
        },
        "GOOGLE_CLIENT_SECRET": {
          "$ref": "$GOOGLE_CLIENT_SECRET"
        },
        "LITELLM_MASTER_KEY": {
          "$ref": "$LITELLM_MASTER_KEY"
        },
        "LITELLM_BASE_URL": {
          "$ref": "$LITELLM_SERVICE_URL"
        }
      }
    }
  ]
}